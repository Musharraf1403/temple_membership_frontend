<div class="container">
  <p-toast />

  <div class="card p-5 text-center">
    <!-- Cancel Header -->
    <div class="mb-5">
      <i class="pi pi-times-circle text-red-500" style="font-size: 4rem;"></i>
      <h1 class="mt-3 mb-2">Payment Cancelled</h1>
      <p class="text-gray-600">Your payment was not completed</p>
    </div>

    <!-- Cancellation Details -->
    <div *ngIf="pendingDetails && !loading" class="surface-section p-4 border-round mb-5">
      <!-- Email Notification Message -->
      <div class="bg-blue-50 border-1 border-blue-200 border-round p-4 mb-5">
        <div class="flex gap-3">
          <i class="pi pi-envelope text-blue-600" style="font-size: 1.5rem;"></i>
          <div>
            <h4 class="mt-0 mb-2 text-blue-700">Cancellation Confirmation Sent</h4>
            <p class="m-0 text-blue-600">
              We've sent a cancellation confirmation email to <strong>{{ pendingDetails.member?.email }}</strong>. 
              Please check your email for the details.
            </p>
          </div>
        </div>
      </div>

      <!-- Details -->
      <div class="grid mb-5">
        <div class="col-12 md:col-6">
          <div class="surface-section p-4 border-round">
            <h3 class="mb-3">Registration Details</h3>
            <div class="mb-3">
              <span class="text-gray-600 font-semibold">Transaction ID:</span>
              <p class="mt-1">{{ pendingDetails.paymentIntent }}</p>
            </div>
            <div class="mb-3">
              <span class="text-gray-600 font-semibold">Amount:</span>
              <p class="mt-1 text-xl font-bold text-red-600">Â£{{ pendingDetails.amount }}</p>
            </div>
            <div class="mb-3">
              <span class="text-gray-600 font-semibold">Status:</span>
              <p class="mt-1">{{ pendingDetails.paymentStatus || 'Cancelled' }}</p>
            </div>
          </div>
        </div>
        <div class="col-12 md:col-6">
          <div class="surface-section p-4 border-round">
            <h3 class="mb-3">Your Information</h3>
            <div class="mb-3">
              <span class="text-gray-600 font-semibold">Name:</span>
              <p class="mt-1">{{ pendingDetails.member?.name }}</p>
            </div>
            <div class="mb-3">
              <span class="text-gray-600 font-semibold">Email:</span>
              <p class="mt-1">{{ pendingDetails.member?.email }}</p>
            </div>
            <div class="mb-3">
              <span class="text-gray-600 font-semibold">Phone:</span>
              <p class="mt-1">{{ pendingDetails.member?.phone }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="!loading && !pendingDetails" class="surface-section p-4 border-round mb-5">
      <p class="text-gray-700">
        Your payment has been cancelled. You can return to the home page or try again.
      </p>
    </div>

    <!-- Action Buttons -->
    <div class="flex gap-3 justify-content-center flex-wrap">
      <p-button
        label="Go to Home"
        icon="pi pi-home"
        severity="secondary"
        (onClick)="goHome()"
      />
    </div>
  </div>
</div>

